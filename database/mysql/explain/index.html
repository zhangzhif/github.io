<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="JAVA,">
  <meta name="keyword" content="java, 编程">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      Explain工具 | 张治峰的博客
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
    
<script src="/js/qrious.js"></script>

  
  
  

  
  
    
<script src="/js/local-search.js"></script>


<meta name="generator" content="Hexo 4.2.1"></head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>
  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>张治峰的博客</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">主页</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/java/" class="item-link">JAVA</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/framework/" class="item-link">开发框架</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/database/" class="item-link">数据库</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/middleware/" class="item-link">中间件</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/essay/" class="item-link">随笔</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">关于</a>
          
        </li>
      
      
        <li class="menu-item menu-item-search right-list">
    <a role="button" class="popup-trigger">
        <i class="fa fa-search fa-fw"></i>
    </a>
</li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">主页</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/java/" class="menu-link">JAVA</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/framework/" class="menu-link">开发框架</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/database/" class="menu-link">数据库</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/middleware/" class="menu-link">中间件</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/essay/" class="menu-link">随笔</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">关于</a>
            
          </li>
        
      </ul>
    </div>
    
      <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
            <span class="search-icon">
                <i class="fa fa-search"></i>
            </span>
            <div class="search-input-container">
                <input autocomplete="off" autocapitalize="off"
                    placeholder="Please enter your keyword(s) to search." spellcheck="false"
                    type="search" class="search-input">
            </div>
            <span class="popup-btn-close">
                <i class="fa fa-times-circle"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>
    
  </div>
</header>

    <div id="article-banner">
  <h2>Explain工具</h2>
  <p class="post-date">2021-09-17</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p><em>mysql安装: <a href="/database/mysql/install/">mysql5.7 安装与配置（centos7)</a></em></p>
<p><em>使用EXPLAIN关键字可以模拟优化器执行SQL语句，分析你的查询语句或是结构的性能瓶颈。在 select 语句之前增加 explain 关键字，MySQL 会在查询上设置一个标记，执行查询会返回执行计划的信息，而不是 执行这条SQL。</em></p>
<p><strong>⚠️ 如果 from 中包含子查询，仍会执行该子查询，将结果放入临时表中。</strong></p>
<h2 id="示例分析"><a href="#示例分析" class="headerlink" title="示例分析"></a>示例分析</h2><h3 id="表准备"><a href="#表准备" class="headerlink" title="表准备"></a>表准备</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DROP TABLE IF EXISTS &#96;actor&#96;;</span><br><span class="line">CREATE TABLE &#96;actor&#96; (</span><br><span class="line"> &#96;id&#96; int(11) NOT NULL,</span><br><span class="line"> &#96;name&#96; varchar(45) DEFAULT NULL,</span><br><span class="line"> &#96;update_time&#96; datetime DEFAULT NULL,</span><br><span class="line">	PRIMARY KEY (&#96;id&#96;)</span><br><span class="line">) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br><span class="line"></span><br><span class="line">INSERT INTO &#96;actor&#96; (&#96;id&#96;, &#96;name&#96;, &#96;update_time&#96;) VALUES (1,&#39;a&#39;,&#39;2017‐12‐22</span><br><span class="line">15:27:18&#39;), (2,&#39;b&#39;,&#39;2017‐12‐22 15:27:18&#39;), (3,&#39;c&#39;,&#39;2017‐12‐22 15:27:18&#39;);</span><br><span class="line"> </span><br><span class="line">DROP TABLE IF EXISTS &#96;film&#96;;</span><br><span class="line">	CREATE TABLE &#96;film&#96; (</span><br><span class="line">	&#96;id&#96; int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">	&#96;name&#96; varchar(10) DEFAULT NULL,</span><br><span class="line">	PRIMARY KEY (&#96;id&#96;),</span><br><span class="line">	KEY &#96;idx_name&#96; (&#96;name&#96;)</span><br><span class="line">) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br><span class="line"></span><br><span class="line">INSERT INTO &#96;film&#96; (&#96;id&#96;, &#96;name&#96;) VALUES (3,&#39;film0&#39;),(1,&#39;film1&#39;),(2,&#39;film2&#39;);</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS &#96;film_actor&#96;;</span><br><span class="line">CREATE TABLE &#96;film_actor&#96; (</span><br><span class="line">	&#96;id&#96; int(11) NOT NULL,</span><br><span class="line">	&#96;film_id&#96; int(11) NOT NULL,</span><br><span class="line">	&#96;actor_id&#96; int(11) NOT NULL,</span><br><span class="line">	&#96;remark&#96; varchar(255) DEFAULT NULL,</span><br><span class="line">	PRIMARY KEY (&#96;id&#96;),</span><br><span class="line">KEY &#96;idx_film_actor_id&#96; (&#96;film_id&#96;,&#96;actor_id&#96;)</span><br><span class="line">) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br><span class="line"></span><br><span class="line">INSERT INTO &#96;film_actor&#96; (&#96;id&#96;, &#96;film_id&#96;, &#96;actor_id&#96;) VALUES (1,1,1),(2,1,2),(3,2,1)</span><br></pre></td></tr></table></figure>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p><em>在查询中的每个表会输出一行，如果有两个表通过 join 连接查询，那么会输出两行如下图:</em><br><img src="/database/mysql/explain/explain_1.jpg" alt><br><img src="/database/mysql/explain/explain_2.jpg" alt></p>
<h2 id="explain两个变种（5-7以后不加也能实现效果）"><a href="#explain两个变种（5-7以后不加也能实现效果）" class="headerlink" title="explain两个变种（5.7以后不加也能实现效果）"></a>explain两个变种（5.7以后不加也能实现效果）</h2><p><em>explain 有两个变种 explain extended 和 explain partitions,可以在其基础上看更多的信息。</em></p>
<h3 id="explain-extended"><a href="#explain-extended" class="headerlink" title="explain extended"></a>explain extended</h3><p><em>会在 explain 的基础上额外提供一些查询优化的信息。紧随其后通过 show warnings 命令可以得到优化后的查询语句，从而看出优化器优化了什么。额外还有 filtered 列，是一个半分比的值，rows * filtered/100 可以估算出将要和 explain 中前一个表进行连接的行数(前一个表指 explain 中的id值比当前表id值小的 表)。</em><br><img src="/database/mysql/explain/explain_3.jpg" alt="结果1"></p>
<hr>

<p><img src="/database/mysql/explain/explain_4.jpg" alt="结果2"></p>
<h3 id="explain-partitions"><a href="#explain-partitions" class="headerlink" title="explain partitions"></a>explain partitions</h3><p><em>相比 explain 多了个 partitions 字段，如果查询是基于分区表的话，会显示查询将访问的分 区。</em></p>
<h2 id="explain中的列"><a href="#explain中的列" class="headerlink" title="explain中的列"></a>explain中的列</h2><p><em>接下来我们将展示 explain 中每个列的作用。</em></p>
<h3 id="id"><a href="#id" class="headerlink" title="id"></a>id</h3><p><em>id列的编号是 select 的序列号，有几个 select 就有几个id，并且id的顺序是按 select 出现的顺序增长的。id列越大执行优先级越高,id相同则从上往下执行，id为NULL最后执行。</em></p>
<h3 id="select-type"><a href="#select-type" class="headerlink" title="select_type"></a>select_type</h3><p><em>select_type 表示对应行的查询类型是简单查询还是复杂查询。</em></p>
<ol>
<li><p>simple:简单查询。查询不包含子查询和union<br><img src="/database/mysql/explain/select_type_1.jpg" alt></p>
</li>
<li><p>primary:复杂查询中最外层的 select</p>
</li>
<li><p>subquery:包含在 select 中的子查询(不在 from 子句中)</p>
</li>
<li><p>derived:包含在 from 子句中的子查询。MySQL会将结果存放在一个临时表中，也称为派生表(derived的英文含 义)</p>
<blockquote>
<p>primary,subquery,derived 三种情况如下图 </p>
</blockquote>
<p>  <img src="/database/mysql/explain/select_type_2.jpg" alt></p>
</li>
<li><p>union:在 union 中的第二个和随后的 select<br><img src="/database/mysql/explain/select_type_3.jpg" alt></p>
</li>
</ol>
<h3 id="table"><a href="#table" class="headerlink" title="table"></a>table</h3><p><em>这一列表示 explain 的一行正在访问哪个表。当 from 子句中有子查询时，table列是 <derivenN> 格式，表示当前查询依赖 id=N 的查询，于是先执行 id=N 的查 询。当有 union 时，UNION RESULT 的 table 列的值为&lt;union1,2&gt;，1和2表示参与 union 的 select 行id。</derivenN></em></p>
<h3 id="type"><a href="#type" class="headerlink" title="type"></a>type</h3><p>这一列表示关联类型或访问类型，即MySQL决定如何查找表中的行，查找数据行记录的大概范围。 依次从最优到最差分别为:</p>
<blockquote>
<p>system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; ALL </p>
</blockquote>
<p>一般来说，得保证查询达到range级别，最好达到ref。</p>
<h4 id="null"><a href="#null" class="headerlink" title="null"></a>null</h4><p> mysql能够在优化阶段分解查询语句，在执行阶段用不着再访问表或索引。例如:在索引列中选取最小值，可 以单独查找索引来完成，不需要在执行时访问表<br><img src="/database/mysql/explain/type_1.jpg" alt></p>
<h4 id="system"><a href="#system" class="headerlink" title="system"></a>system</h4><p>表中只有一行数据或者是空表，且只能用于myisam和memory表。如果是Innodb引擎表，type列在这个情况通常都是all或者index。</p>
<h4 id="const"><a href="#const" class="headerlink" title="const"></a>const</h4><p>mysql能对查询的某部分进行优化并将其转化成一个常量(可以看show warnings 的结果)。用于 primary key 或 unique key 的所有列与常数比较时，所以表最多有一个匹配行，读取1次，速度比较快。<br><img src="/database/mysql/explain/type_2.jpg" alt></p>
<h4 id="eq-ref"><a href="#eq-ref" class="headerlink" title="eq_ref"></a>eq_ref</h4><p>primary key 或 unique key 索引的所有部分被连接使用 ，最多只会返回一条符合条件的记录。这可能是在 const 之外最好的联接类型了，简单的 select 查询不会出现这种 type。<br><img src="/database/mysql/explain/type_3.jpg" alt></p>
<h4 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h4><p>相比 eq_ref，不使用唯一索引，而是使用普通索引或者唯一性索引的部分前缀，索引要和某个值相比较，可能会 找到多个符合条件的行。</p>
<ol>
<li><p>简单 select 查询，name是普通索引(非唯一索引)<br> <img src="/database/mysql/explain/type_4.jpg" alt></p>
</li>
<li><p>关联表查询，idx_film_actor_id是film_id和actor_id的联合索引，这里使用到了film_actor的左边前缀film_id部分。<br> <img src="/database/mysql/explain/type_5.jpg" alt></p>
</li>
</ol>
<h4 id="range"><a href="#range" class="headerlink" title="range"></a>range</h4><p>范围扫描通常出现在 in(), between ,&gt; ,&lt;, &gt;= 等操作中。使用一个索引来检索给定范围的行。<br><img src="/database/mysql/explain/type_6.jpg" alt></p>
<h4 id="index"><a href="#index" class="headerlink" title="index"></a>index</h4><p>扫描全索引就能拿到结果，一般是扫描某个二级索引，这种扫描不会从索引树根节点开始快速查找，而是直接 对二级索引的叶子节点遍历和扫描，速度还是比较慢的，这种查询一般为使用<strong>覆盖索引</strong>，二级索引一般比较小，所以这 种通常比ALL快一些。<br><img src="/database/mysql/explain/index_1.jpg" alt></p>
<h4 id="all"><a href="#all" class="headerlink" title="all"></a>all</h4><p>即全表扫描，扫描你的聚簇索引的所有叶子节点。通常情况下这需要增加索引来进行优化了。<br><img src="/database/mysql/explain/all_1.jpg" alt></p>
<h3 id="possible-keys"><a href="#possible-keys" class="headerlink" title="possible_keys"></a>possible_keys</h3><p>这一列显示查询可能使用哪些索引来查找。<br>explain 时可能出现 possible_keys 有列，而 key 显示 NULL 的情况，这种情况是因为表中数据不多，mysql认为索引 对此查询帮助不大，选择了全表查询。<br>如果该列是NULL，则没有相关的索引。在这种情况下，可以通过检查 where 子句看是否可以创造一个适当的索引来提 高查询性能，然后用 explain 查看效果。</p>
<h3 id="key"><a href="#key" class="headerlink" title="key"></a>key</h3><p>这一列显示mysql实际采用哪个索引来优化对该表的访问。<br>如果没有使用索引，则该列是 NULL。如果想强制mysql使用或忽视possible_keys列中的索引，在查询中使用 <strong>force index</strong>、<strong>ignore index</strong>。</p>
<h3 id="key-len"><a href="#key-len" class="headerlink" title="key_len"></a>key_len</h3><p>这一列显示了mysql在索引里使用的字节数，通过这个值可以算出具体使用了索引中的哪些列。 举例来说，film_actor的联合索引 idx_film_actor_id 由 film_id 和 actor_id 两个int列组成，并且每个int是4字节。通 过结果中的key_len=4可推断出查询使用了第一个列:film_id列来执行索引查找。<br><img src="/database/mysql/explain/key_len_1.jpg" alt><br>key_len计算规则如下:</p>
<ol>
<li><p>字符串，char(n)和varchar(n)，5.0.3以后版本中，n均代表字符数，而不是字节数，如果是utf-8，一个数字或字母占1个字节，一个汉字占3个字节</p>
<ul>
<li>char(n)如果存汉字长度就是 3n 字节</li>
<li>varchar(n):如果存汉字则长度是 3n + 2 字节，加的2字节用来存储字符串长度，因为 varchar是变长字符串</li>
</ul>
</li>
<li><p>数值类型 </p>
<ul>
<li>tinyint:1字节</li>
<li>smallint:2字节 </li>
<li>int:4字节</li>
<li>bigint:8字节  </li>
</ul>
</li>
<li><p>时间类型 </p>
<ul>
<li>date:3字节</li>
<li>timestamp:4字节</li>
<li>datetime:8字节</li>
</ul>
</li>
</ol>
<blockquote>
<p>如果字段允许为 NULL，需要1字节记录是否为 NULL索引最大长度是768字节，当字符串过长时，mysql会做一个类似左前缀索引的处理，将前半部分的字符提取出来做索引。</p>
</blockquote>
<h3 id="ref-1"><a href="#ref-1" class="headerlink" title="ref"></a>ref</h3><p>这一列显示了在key列记录的索引中，表查找值所用到的列或常量，常见的有:const(常量)，字段名(例:film.id)</p>
<h3 id="rows"><a href="#rows" class="headerlink" title="rows"></a>rows</h3><p>这一列是mysql估计要读取并检测的行数，⚠️注意这个不是结果集里的行数。</p>
<h3 id="Extra"><a href="#Extra" class="headerlink" title="Extra"></a>Extra</h3><p>这一列展示的是额外信息。常见的重要值如下</p>
<ol>
<li><p>Using index:使用覆盖索引</p>
<blockquote>
<p>覆盖索引定义: mysql执行计划explain结果里的key有使用索引，如果select后面查询的字段都可以从这个索引的树中 获取，这种情况一般可以说是用到了覆盖索引，extra里一般都有using index;覆盖索引一般针对的是辅助索引，整个 查询结果只通过辅助索引就能拿到结果，不需要通过辅助索引树找到主键，再通过主键去主键索引树里获取其它字段值。</p>
</blockquote>
<p><img src="/database/mysql/explain/index_1.jpg" alt></p>
</li>
<li><p>Using where:使用 where 语句来处理结果，并且查询的列未被索引覆盖<br><img src="/database/mysql/explain/extra_1.jpg" alt></p>
</li>
<li><p>Using index condition:查询的列不完全被索引覆盖，where条件中是用索引进行范围搜索;<br><img src="/database/mysql/explain/extra_2.jpg" alt></p>
</li>
<li><p>Using temporary:mysql需要创建一张临时表来处理查询。出现这种情况一般是要进行优化的，首先是想到用索引来优化。</p>
<ul>
<li><p>actor.name没有索引，此时创建了张临时表来distinct<br><img src="/database/mysql/explain/extra_3.jpg" alt></p>
</li>
<li><p>film.name建立了idx_name索引，此时查询时extra是using index,没有用临时表<br><img src="/database/mysql/explain/extra_4.jpg" alt></p>
</li>
</ul>
</li>
<li><p>Using filesort: 将用外部排序而不是索引排序，数据较小时从内存排序，否则需要在磁盘完成排序。这种情况下一 般也是要考虑使用索引来优化的。</p>
<ul>
<li><p>actor.name未创建索引，会浏览actor整个表，保存排序关键字name和对应的id，然后排序name并检索行记录<br><img src="/database/mysql/explain/extra_5.jpg" alt></p>
</li>
<li><p>film.name建立了idx_name索引,此时查询时extra是using index<br><img src="/database/mysql/explain/extra_6.jpg" alt></p>
</li>
</ul>
</li>
<li><p>Select tables optimized away : 使用某些聚合函数(比如 max、min)来访问存在索引的某个字段时出现<br><img src="/database/mysql/explain/extra_7.jpg" alt></p>
</li>
</ol>
</section>
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#mysql" >
    <span class="tag-code">mysql</span>
  </a>

      </div>
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/database/mysql/index-1/">
        <span class="nav-arrow">← </span>
        
          MySQL索引概述
        
      </a>
    
    
      <a class="nav-right" href="/database/mysql/command/">
        
          mysql常用命令及配置
        
        <span class="nav-arrow"> →</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- 打赏 START -->
    
      <div class="money-like">
        <div class="reward-btn">
          赏
          <span class="money-code">
            <span class="alipay-code">
              <div class="code-image"></div>
              <b>使用支付宝打赏</b>
            </span>
            <span class="wechat-code">
              <div class="code-image"></div>
              <b>使用微信打赏</b>
            </span>
          </span>
        </div>
        <p class="notice">若你觉得我的文章对你有帮助，欢迎点击上方按钮对我打赏</p>
      </div>
    
    <!-- 打赏 END -->
    <!-- 二维码 START -->
    
      <div class="qrcode">
        <canvas id="share-qrcode"></canvas>
        <p class="notice">扫描二维码，分享此文章</p>
      </div>
    
    <!-- 二维码 END -->
    
      <!-- Gitment START -->
      <div id="comments"></div>
      <!-- Gitment END -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">目录</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#介绍"><span class="toc-nav-text">介绍</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#示例分析"><span class="toc-nav-text">示例分析</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#表准备"><span class="toc-nav-text">表准备</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#示例"><span class="toc-nav-text">示例</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#explain两个变种（5-7以后不加也能实现效果）"><span class="toc-nav-text">explain两个变种（5.7以后不加也能实现效果）</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#explain-extended"><span class="toc-nav-text">explain extended</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#explain-partitions"><span class="toc-nav-text">explain partitions</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#explain中的列"><span class="toc-nav-text">explain中的列</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#id"><span class="toc-nav-text">id</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#select-type"><span class="toc-nav-text">select_type</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#table"><span class="toc-nav-text">table</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#type"><span class="toc-nav-text">type</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-text">null</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#system"><span class="toc-nav-text">system</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#const"><span class="toc-nav-text">const</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#eq-ref"><span class="toc-nav-text">eq_ref</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#ref"><span class="toc-nav-text">ref</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#range"><span class="toc-nav-text">range</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#index"><span class="toc-nav-text">index</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#all"><span class="toc-nav-text">all</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#possible-keys"><span class="toc-nav-text">possible_keys</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#key"><span class="toc-nav-text">key</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#key-len"><span class="toc-nav-text">key_len</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#ref-1"><span class="toc-nav-text">ref</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#rows"><span class="toc-nav-text">rows</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Extra"><span class="toc-nav-text">Extra</span></a></li></ol></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>
<link rel="stylesheet" href="https://unpkg.com/gitalk@latest/dist/gitalk.css">
<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script>
<script src="https://priesttomb.github.io/js/md5.min.js"></script>
<script>
  (function () {

    var url = 'http://zev_gitee.gitee.io/database/mysql/explain/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', '/css/images/error_icon.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== '/css/images/error_icon.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>


  <script>
    var qr = new QRious({
      element: document.getElementById('share-qrcode'),
      value: document.location.href
    });
  </script>





  <script>
    let gitalk = new Gitalk({
      clientID: '7c19a6dde1744eaa8c8e',
      clientSecret: '689f2f34a11a1edad102d8b1c63c57e3ebb87512',
      repo: 'blog-comment',
      owner: 'zhangzhif',
      admin: 'zhangzhif',
      id: '2021-09-17T00-00-00',
      distractionFreeMode: true  // Facebook-like distraction free mode
    });
    gitalk.render(document.getElementById('comments'));
  </script>








    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
<!--  <p class="copyright">-->
<!--    &copy; 2022 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>-->
<!--    <br>-->
<!--    Theme by <a href="https://github.com/yanm1ng" target="_blank" rel="noopener">yanm1ng</a>-->
<!--  </p>-->
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'false';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      hljs.configure({useBR: true});
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>


  </body>
</html>